var ffuShop=ffuShop||{};ffuShop.helpers={nativeChange:function(e){if(!("originalEvent"in e))if("createEvent"in document){var t=document.createEvent("HTMLEvents");t.initEvent("change",!1,!0),this.dispatchEvent(t)}else this.fireEvent("onchange")},createErrorMsg:function(e){var r='<ol class="uk-text-left">';return $.each(e,function(e,t){r+="<li>",$.each(t,function(e,t){r+=t+"<br>"}),r+="</li>"}),r+="</ol>"},errorHandler:function(e){if(e instanceof Error)throw e;UIkit.notification({status:"danger",message:ffuShop.helpers.createErrorMsg(e)})},errorReject:function(e,t,r){t.responseJSON&&(t.responseJSON.errors?e(t.responseJSON.errors):t.responseJSON.exception&&e({Exception:[r,t.responseJSON.exception]}))}},ffuShop.translation={lang:"ua",ua:{addToCart:{success:"шт. додано до кошика",notSelected:"На жаль, цей товар вiсутнiй..."},removeCart:{confirm:"Видалити ",ok:"Так",cancel:"Нi"},cartEmpty:{message:"Немає жодного товару..."},checkout:{noDelivery:"Не заповнена iнформацiя обраного способу доставки...",noUser:"Особисті дані не заповнені..."},user:{changePasswordNoEmail:"Будь ласка, вкажiть email за яким ви зареєструвались"}},en:{addToCart:{success:"pcs. added to cart",notSelected:"Product is out of stock..."},removeCart:{confirm:"Delete ",ok:"Yes",cancel:"No"},cartEmpty:{message:"No products in cart..."},checkout:{noDelivery:"Delivery method data is not filled...",noUser:"Personal data is not filled..."},user:{changePasswordNoEmail:"Plase enter an email you registered with"}}},ffuShop.routes={user:{getUser:{req:"post",url:"/user/get"},saveUser:{req:"post",url:"/user/save"},changePass:{req:"post",url:"/user/changepass"},resetPass:{req:"post",url:"/user/resetpass"},auth:{req:"post",url:"/user/auth"},register:{req:"post",url:"/user/register"}},cart:{getNPDeliveryPrice:{req:"post",url:"/getNPDeliveryPrice"},getProducts:{req:"post",url:"/cart/get"},addProduct:{req:"post",url:"/cart/add"},removeProduct:{req:"post",url:"/cart/remove"},setProductQuantity:{req:"post",url:"/cart/row/update"},registerUser:{req:"post",url:"/cart/user/reg"}},checkout:{confirm:{req:"post",url:"/cart/checkout"}},singleProduct:{getProductVariants:{req:"post",url:"/product/json/sku/"},getCustomImage:{req:"post",url:"/product/custom/"}},orders:{all:{req:"post",url:"/order/list"},details:{req:"post",url:"/order/details"}}},jQuery(document).ready(function(f){function r(e){f(e.target).closest("#fsSearch").length||(e.preventDefault(),f("#fsSearch").slideUp("fast"),f("body").off("click",r))}function s(e){f(e.target).closest("#fsMenuCollapse").length||f(e.target).closest("#fsMenuToggle").length||(e.preventDefault(),f("#fsMenuCollapse").removeClass("uk-open uk-animation-fade uk-animation-fast").off("click",t),f("body").off("click",s))}function t(e){f(e.target).closest(".uk-navbar-dropdown-nav").length||e.preventDefault()}f(".fs-search-open").on("click",function(){var e=f("#fsSearch"),t=f("#fsMenuCollapse");e.slideToggle("fast",function(){e.is(":visible")&&f("body").on("click",r)}),t.hasClass("uk-open")&&(t.removeClass("uk-open uk-animation-fade uk-animation-fast"),f("body").off("click",s))}),f("#fsMenuToggle").on("click",function(){var e=f("#fsMenuCollapse");f("#fsSearch").slideUp("fast"),f("body").off("click",r),e.toggleClass("uk-open uk-animation-fade uk-animation-fast"),e.is(":visible")?(f("body").on("click",s),e.on("click",".uk-parent",t)):(f("body").off("click",s),e.off("click",t))}),f(window).on("load",function(){var r=f("#fsCategoryView .uk-subnav"),s=0;function e(){var e=r.closest(".uk-container"),t=e.innerWidth()-parseInt(e.css("padding-left"))-parseInt(e.css("padding-right"));switch(s<t?"desktop":"mobile"){case"desktop":r.removeClass("uk-hidden"),r.next().addClass("uk-hidden");break;case"mobile":default:r.addClass("uk-hidden"),r.next().removeClass("uk-hidden")}}r&&(r.find(" > li").each(function(e,t){s+=f(t).outerWidth()}),s-=20,e(),f(window).on("resize",e))});var e=f("#fsCategoryView > .uk-container > .uk-subnav > li > a, .fs-category-responsive .uk-nav > li > a, .fs-sidebar-nav .uk-list > li > a");if(e.length){var h,o=location.origin+location.pathname;e.each(function(e,t){var r=f(t);r.attr("href")==o&&(r.parent().addClass("uk-active"),h=r.text())}),f(".fs-category-responsive .fs-cat-name").text(h)}if(sessionStorage){var a="ontouchstart"in document.documentElement?"click":"mouseenter";f("body").on(a,".fs-product-card[data-product-id] .fs-product-colors > li",function(e){var t=f(e.target).closest("li"),r=t.data("sku");if(r){var s=t.closest(".fs-product-card"),i=s.find(".fs-product-card-image");if(sessionStorage[r]){if("no_image"==sessionStorage[r])return;i.css("background-image","url("+sessionStorage[r]+")")}else f.ajax({type:ffuShop.routes.cart.getNPDeliveryPrice.req,url:ffuShop.routes.cart.getNPDeliveryPrice.url+s.data("product-id"),dataType:"json",success:function(e){for(sku in console.log(e),e){var t=e[sku].sku_image?e[sku].sku_image:"no_image";"no_image"!=t&&i.css("background-image","url("+t+")"),sessionStorage[sku]=t}}})}})}function n(e){return f.isEmptyObject(e)?null:(f.each(e,function(e,t){t.qty=parseInt(t.qty),t.price=parseInt(t.price),t.options&&(t.options.discount?(t.options.discount=parseInt(t.options.discount),t.discountPrice=Math.round(t.price*(1+t.options.discount/100))):(t.options.discount=null,t.discountPrice=t.price),t.options.color_value&&(t.options.color_value_2=t.options.color_value_2||t.options.color_value))}),e)}ffuShop.translation=ffuShop.translation||{},~f("html").attr("lang").indexOf("en")&&(ffuShop.translation.lang="en"),f.ajaxSetup({dataType:"json",headers:{"X-CSRF-TOKEN":f('meta[name="csrf-token"]').attr("content")}}),ffuShop.store=new Vuex.Store({state:{products:[],user:{first_name:"",last_name:"",email:"",phone:"",birthday:"",sex:null,valid:!1,registered:!1},deliveryProviders:{},paymentProviders:{},order:{delivery:{provider:null,cost:0},payment:{provider:null,cost:0}}},mutations:{addProduct:function(t,r){f.ajax({url:ffuShop.routes.cart.addProduct.url,type:ffuShop.routes.cart.addProduct.req,data:r,dataType:"json",success:function(e){t.products=n(e),UIkit.notification({status:"success",message:'<span uk-icon="icon: check"></span> '+r.name+" x "+r.qty+ffuShop.translation[ffuShop.translation.lang].addToCart.success})}})},getProducts:function(t){f.ajax({url:ffuShop.routes.cart.getProducts.url,type:ffuShop.routes.cart.getProducts.req,dataType:"json",success:function(e){t.products=n(e)}})},getUser:function(i){f.ajax({url:ffuShop.routes.user.getUser.url,type:ffuShop.routes.user.getUser.req,dataType:"json",success:function(e){if(e){if(e.valid=!0,e.registered=!0,e.birthday=e.birthday?e.birthday:"",e.deliveryProviders&&!f.isEmptyObject(e.deliveryProviders)){for(providerName in i.deliveryProviders)if(providerName in e.deliveryProviders){var t=i.deliveryProviders[providerName].options,r=e.deliveryProviders[providerName].options;for(option in r)t[option]=r[option];i.deliveryProviders[providerName].valid=e.deliveryProviders[providerName].valid;var s=i.order.delivery.provider;e.deliveryProviders[providerName].valid&&!i.deliveryProviders[s].valid&&(i.order.delivery.provider=providerName,i.order.delivery.cost=i.deliveryProviders[providerName].cost)}delete e.deliveryProviders}i.user=e}},complete:function(){f(window).trigger("fs.user.loaded")}})},setUserInfo:function(e,t){var r=t[0],s=t[1];e.user[r]=s},createDeliveryProvider:function(e,t){var r=t[0],s=t[1];Vue.set(e.deliveryProviders,r,s),e.order.delivery.provider||(e.order.delivery={provider:r,cost:s.cost})},setDeliveryProviderField:function(e,t){var r=t[0],s=t[1],i=t[2];e.deliveryProviders[r].options[s]=i},setDeliveryProviderCost:function(e,t){var r=t[0],s=t[1];e.deliveryProviders[r].cost=s},setDeliveryProvider:function(e,t){e.order.delivery.provider=t,e.order.delivery.cost=e.deliveryProviders[t].cost},setDeliveryProviderValid:function(e,t){var r=t[0],s=t[1];e.deliveryProviders[r].valid=s},createPaymentProvider:function(e,t){var r=t[0],s=t[1];Vue.set(e.paymentProviders,r,s),e.order.payment.provider||(e.order.payment={provider:r,cost:s.cost})},setPaymentProvider:function(e,t){e.order.payment.provider=t,e.order.payment.cost=e.paymentProviders[t].cost}},getters:{user:function(e){return!!e.user.registered&&e.user},products:function(e){return f.isEmptyObject(e.products)?null:e.products},delivery:function(e){return{active:e.order.delivery.provider,providers:e.deliveryProviders}},deliveryDetails:function(e){return!f.isEmptyObject(e.deliveryProviders)&&e.deliveryProviders[e.order.delivery.provider].options.details},deliveryDetailsWarehouse:function(e){return!f.isEmptyObject(e.deliveryProviders)&&e.deliveryProviders[e.order.delivery.provider].options.warehouse},deliveryCost:function(e){return e.order.delivery.provider?e.deliveryProviders[e.order.delivery.provider].cost:0},deliveryValid:function(e){return!!e.order.delivery.provider&&e.deliveryProviders[e.order.delivery.provider].valid},payment:function(e){return{active:e.order.payment.provider,providers:e.paymentProviders}},paymentCost:function(e){return e.order.payment.provider?e.paymentProviders[e.order.payment.provider].cost:0}},actions:{getProducts:function(e){e.commit("getProducts")},addProduct:function(e,t){e.commit("addProduct",t)},getUser:function(e){e.commit("getUser")},saveUser:function(s,i){return new Promise(function(t,r){var e=f.extend({},s.state.user,i);f.ajax({url:ffuShop.routes.user.saveUser.url,type:ffuShop.routes.user.saveUser.req,dataType:"json",data:e,success:function(e){e.errors&&!f.isEmptyObject(e.errors)?r(e.errors):(t(),s.dispatch("getUser"))},error:function(e){r(e)}})})},setProductQuantity:function(s,e){return new Promise(function(t,r){f.ajax({type:ffuShop.routes.cart.setProductQuantity.req,url:ffuShop.routes.cart.setProductQuantity.url,dataType:"json",data:{rowId:e[0],qty:e[1]},success:function(e){if(e.errors&&!f.isEmptyObject(e.errors)){for(rowId in e.errors)s.state.products[rowId].qty=parseInt(e.errors[rowId]);r(e.message)}else t()}})})},removeProduct:function(r,s){return new Promise(function(t,e){f.ajax({type:ffuShop.routes.cart.removeProduct.req,url:ffuShop.routes.cart.removeProduct.url,data:{rowId:s},dataType:"json",success:function(e){r.state.products=n(e),r.state.products||(window.location="/"),t()}})})}}}),Vue.component("quantity-counter",{props:{count:{type:Number},rowId:null,max:{type:Number,default:10},active:Boolean},data:function(){return{min:1}},methods:{quantityAdd:function(e){if(e.target.blur(),this.active){var t=+this.count+(this.count<this.max);this.$emit("change",this.count,t,this.rowId)}},quantityRemove:function(e){if(e.target.blur(),this.active){var t=this.count-(this.count>this.min);this.$emit("change",this.count,t,this.rowId)}}},template:'<div class="fs-product-quantity" :class="{\'uk-disabled\':!active}">                    <a href="" @click.prevent="quantityRemove">-</a>                    <span>{{ count }}</span>                    <a href="" @click.prevent="quantityAdd">+</a>                </div>'}),ffuShop.navbar=new Vue({el:"#fsNavbar",store:ffuShop.store,data:function(){return{emptyMsg:ffuShop.translation[ffuShop.translation.lang].cartEmpty.message,active:!0,modalSide:"login",showErrors:!1,fields:{first_name:"",last_name:"",phone:"",email:"",password:""}}},computed:{products:function(){return this.$store.getters.products},user:function(){return this.$store.getters.user},cartTotal:function(){var e=0,t=0,r=0;for(p in this.products)r++,e+=+this.products[p].qty,t+=this.products[p].qty*this.products[p].discountPrice;return{quantity:e,summ:Math.round(t),uniqItems:r}},fieldsValid:function(){return{first_name:!!this.fields.first_name&&/^[a-zа-я ,.\'-]+$/i.test(this.fields.first_name),last_name:/^[a-zа-я ,.\'-]+$/i.test(this.fields.last_name),phone:!!this.fields.phone&&/\+38\([0-9]{3}\)[0-9]{3}-[0-9]{2}-[0-9]{2}/.test(this.fields.phone),email:!!this.fields.email&&/^([\w.*-]+@([\w-]+\.)+[\w-]{2,4})$/.test(this.fields.email),password:3<this.fields.password.length}}},methods:{checkCart:function(e){f.isEmptyObject(this.products)?UIkit.notification({status:"warning",message:this.emptyMsg}):window.location=e.target.href},changeSide:function(e){this.modalSide=e},refresh:function(){if(UIkit.update(a="update"),this.$refs.phone){var t=this;f(this.$refs.phone).mask("+38(999)999-99-99").on("change",function(e){t.fields.phone=e.target.value})}},userLogin:function(){if(this.fieldsValid.email&&this.fieldsValid.password){var e={email:this.fields.email,password:this.fields.password};new Promise(function(t,r){f.ajax({url:ffuShop.routes.user.auth.url,method:ffuShop.routes.user.auth.req,dataType:"json",data:e,success:function(e){e.errors?r(e.errors):t(e)},error:function(e,t){ffuShop.helpers.errorReject(r,e,t)}})}).then(function(e){ffuShop.store.dispatch("getUser"),UIkit.modal("#fsLoginModal").hide()}).catch(ffuShop.helpers.errorHandler)}else this.showErrors=!0},userRegister:function(){var e=!0;for(field in this.fieldsValid)e=e&&this.fieldsValid[field];if(e){this.active=!1;var s=this;new Promise(function(t,r){f.ajax({url:ffuShop.routes.user.register.url,method:ffuShop.routes.user.register.req,data:s.fields,dataType:"json",success:function(e){e.errors?r(e.errors):t(e)},error:function(e,t){ffuShop.helpers.errorReject(r,e,t)}})}).then(function(e){UIkit.notification({status:"success",message:e.message}),UIkit.modal("#fsLoginModal").hide()}).catch(ffuShop.helpers.errorHandler).finally(function(){s.active=!0})}else this.showErrors=!0},changePassword:function(){if(!this.fieldsValid.email)return this.showErrors=!0,void UIkit.notification({status:"danger",message:ffuShop.translation[ffuShop.translation.lang].user.changePasswordNoEmail});this.active=!1;var e=this;new Promise(function(t,r){f.ajax({url:ffuShop.routes.user.resetPass.url,method:ffuShop.routes.user.resetPass.req,data:e.fields,dataType:"json",success:function(e){e.errors?r(e.errors):t(e)},error:function(e,t){ffuShop.helpers.errorReject(r,e,t)}})}).then(function(e){UIkit.notification({status:"success",message:e.message}),UIkit.modal("#fsLoginModal").hide()}).catch(ffuShop.helpers.errorHandler).finally(function(){e.active=!0})}},created:function(){this.$store.dispatch("getProducts"),this.$store.dispatch("getUser")},watch:{showErrors:function(e){var t=this;e&&setTimeout(function(){t.showErrors=!1},2e3)}}}),f("#fsProductSingle").length&&(ffuShop.singleProduct=new Vue({el:"#fsProductSingle",data:{id:null,name:"",sku:null,price:null,discount:null,attributes:{color:{current:null},size:{current:null}},slideshow:{obj:null,pictures:{}},productVariants:null,quantity:1,max:10},store:ffuShop.store,computed:{maxQuantity:function(){return 10<this.max?10:this.max},discountPrice:function(){return this.discount?Math.round(this.price*(1+parseInt(this.discount)/100)):this.price}},methods:{getProductVariants:function(){var l=this;f.ajax({url:ffuShop.routes.singleProduct.getProductVariants.url+l.id,type:ffuShop.routes.singleProduct.getProductVariants.req,dataType:"json"}).then(function(e){if(1<Object.keys(e).length){for(h in l.productVariants=e,l.attributes){var t=[];for(sku in l.productVariants){var r={},s=l.productVariants[sku][h];s&&(~f.inArray(s.id,t)||(t.push(s.id),f.extend(r,s),r.active="color"==h||l.productVariants[sku].in_stock,"color"!=h||r.value_2||(r.value_2=r.value),l.attributes[h].all||(l.attributes[h].all=[]),l.attributes[h].all.push(r)))}}var i=0,o=[];for(sku in l.productVariants)if(l.productVariants[sku].color){var a="color_"+l.productVariants[sku].color.id;if(l.productVariants[sku].sku_image&&!~f.inArray(a,o)){o.push(a);n={slideIndex:i++,name:l.productVariants[sku].color.name,image:l.productVariants[sku].sku_image};l.slideshow.pictures[a]=n}}else{if(!l.productVariants[sku].sku_image)continue;var n={slideIndex:i,name:c="pic_"+i,image:l.productVariants[sku].sku_image};l.slideshow.pictures[c]=n,i++}}else{var u=Object.keys(e)[0],d=e[u];if(l.sku=u,l.price=d.in_stock?d.price:null,l.discount=d.discount,l.productVariants=e,d.size&&Vue.set(l.attributes,"size",{current:d.size.value,all:[d.size]}),d.color&&(d.color.active=!0,d.color.value_2=d.color.value_2||d.color.value,Vue.set(l.attributes,"color",{current:d.color.id,all:[d.color]})),d.sku_image){var c=d.color?"color_"+d.color.id:"pic_0";Vue.set(l.slideshow.pictures,c,{slideIndex:0,name:d.sku_image.color?d.sku_image.color.name:"",image:d.sku_image})}}}).then(function(){l.$forceUpdate(),l.attributes.color.all&&l.setAttribute(l.attributes.color.all[0],"color"),l.slideshow.obj.show(0)})},quantityChange:function(e,t){this.quantity=t},getAttrClass:function(e,t){return e.active?this.attributes[t].current==e.id?"uk-active":void 0:"uk-disabled"},updateData:function(){for(h in this.sku=null,this.price=null,this.attributes)if(!this.attributes[h].current)for(index in this.attributes[h].all)if(this.attributes[h].all[index].active){this.attributes[h].current=this.attributes[h].all[index].id;break}for(sku in this.productVariants){var e=!0;for(h in this.attributes)this.productVariants[sku][h]&&this.attributes[h].current!=this.productVariants[sku][h].id&&(e=!1);e&&(this.sku=sku,this.price=this.productVariants[sku].price,this.discount=this.productVariants[sku].discount,this.max=this.productVariants[sku].stock_level)}},setAttribute:function(e,t){if("color"==t&&this.slideshow.obj){var r="color_"+e.id;this.slideshow.pictures.hasOwnProperty(r)&&this.slideshow.obj.show(this.slideshow.pictures[r].slideIndex)}if(!e.active)return!1;for(h in this.attributes[t].current=e.id,this.attributes)if(h!=t&&"color"!=h){var s=[];for(sku in this.productVariants)this.productVariants[sku][h]&&this.productVariants[sku][t].id==e.id&&this.productVariants[sku].in_stock&&s.push(this.productVariants[sku][h].id);for(index in this.attributes[h].all){var o=this.attributes[h].all[index];for(o.active=!1,i=0;i<s.length;i++)o.id==s[i]&&(o.active=!0);this.attributes[h].current!=o.id||o.active||(this.attributes[h].current=s[0]||null)}}this.updateData()},addToCart:function(){if(this.price){var e=this,t={},r=this.productVariants[this.sku];r?(t={id:r.sku_id,name:e.name,qty:e.quantity,price:r.price,options:{product_id:e.id,discount:r.discount,sku:e.sku?e.sku:null,size:r.size?r.size:null,color_name:r.color?r.color.name:null,color_value:r.color?r.color.value:null,color_value_2:r.color?r.color.value_2:null,image:r.sku_image?r.sku_image:null}},this.$store.dispatch("addProduct",t)):UIkit.notification({status:"danger",message:'<span uk-icon="icon: ban"></span> '+ffuShop.translation[ffuShop.translation.lang].addToCart.notSelected})}else UIkit.notification({status:"warning",message:ffuShop.translation[ffuShop.translation.lang].addToCart.notSelected})}},created:function(){this.id=f("#fsProductSingle").data("product-id"),this.name=f("#fsProductSingleName").text(),this.getProductVariants()},mounted:function(){this.slideshow.obj=UIkit.slideshow("#fsProductSingle .fs-product-gallery > .uk-slideshow",{ratio:"1:1"})}}));var u=ffuShop.translation.lang,d={ua:{male:"Чоловіча",female:"Жіноча",noEmail:"Поле email обов`язкове",badEmail:"Невiний Email",noPhone:"Поле телефон обов`язкове",badPhone:"Невiний телефон",noNames:"Прізвище та ім`я обов`язкові",passMissMatch:"Повтор пароля не співпадає з новим паролем",emptyFields:"Всі поля обов`язкові",userSaved:"Данi збережено"},en:{male:"Male",female:"Female",noEmail:"Email address is required",badEmail:"Email is wrong",noPhone:"Phone is required",badPhone:"Phone format is wrong",noNames:"Your full name is required",passMissMatch:"Repeated password do not match new password",emptyFields:"All passwords are required",userSaved:"Information saved"}};f("#fsUserAccount").length&&("ua"==u&&jQuery.datepicker.setDefaults({dayNamesMin:["Нд","Пн","Вт","Ср","Чт","Пт","Сб"],monthNamesShort:["Січень","Лютий","Березень","Квітень","Травень","Червень","Липень","Серпень","Вересень","Жовтень","Листопад","Грудень"]}),ffuShop.userAccount=new Vue({el:"#fsUserAccount",store:ffuShop.store,data:function(){return{page:0,editing:!1,editedFields:{},orders:null,password:{old:{val:"",type:"password"},new:{val:"",type:"password"},repeat:{val:"",class:""}}}},computed:{user:function(){return this.$store.getters.user},sexTranslated:function(){return"male"==this.user.sex?d[u].male:"female"==this.user.sex?d[u].female:""},discountPrice:function(e){if(this.orders){var o=[];return this.orders.forEach(function(e,i){o[i]=[],e.products.forEach(function(e,t){if(e.discount){var r=parseInt(e.price),s=parseInt(e.discount);o[i][t]=Math.round(r*(1+s/100))}else o[i][t]=e.price})}),o}},orderTotal:function(e){if(this.orders){var t=[],i=this;return this.orders.forEach(function(e,r){var s=0;e.products.forEach(function(e,t){s+=parseInt(e.qty)*i.discountPrice[r][t]}),t[r]=s+parseInt(e.delivery.cost)}),t}}},methods:{transBeforeEnter:function(e){e.style.display="none"},transEnter:function(e,t){f(e).delay(300).slideDown(function(){UIkit.update(a="update"),t()})},transLeave:function(e,t){f(e).slideUp(t)},setPage:function(e){this.editing||(this.page=e)},setNewValue:function(e){var t=e.target.name,r=e.target.value;Vue.set(this.editedFields,t,r)},saveUserData:function(){f.isEmptyObject(this.editedFields)&&(this.editing=!1);var e=!0;if(("first_name"in this.editedFields||"last_name"in this.editedFields)&&(this.editedFields.first_name&&this.editedFields.first_name||(e=!1,UIkit.notification({message:d[u].noNames,status:"danger"}))),"email"in this.editedFields&&!/^([\w.*-]+@([\w-]+\.)+[\w-]{2,4})$/.test(this.editedFields.email)){e=!1;var t=d[u][this.editedFields.email.length?"badEmail":"noEmail"];UIkit.notification({message:t,status:"danger"})}if("phone"in this.editedFields&&!/\+38\([0-9]{3}\)[0-9]{3}-[0-9]{2}-[0-9]{2}/.test(this.editedFields.phone)){e=!1;t=d[u][this.editedFields.phone.length?"badPhone":"noPhone"];UIkit.notification({message:t,status:"danger"})}if(e){var r=this;this.$store.dispatch("saveUser",this.editedFields).then(function(){r.editing=!1,UIkit.notification({status:"success",message:d[u].userSaved})}).catch(function(e){console.log(e),UIkit.notification({status:"danger",message:ffuShop.helpers.createErrorMsg(e.errors)})})}},changeView:function(e){var t=this.password[e].type;this.password[e].type="password"==t?"text":"password"},repeatPassClass:function(){this.password.repeat.class=this.password.new.val!=this.password.repeat.val?"uk-form-danger":"uk-form-success"},resetRepeatPassClass:function(){this.password.repeat.class=""},changePassword:function(){if(this.password.old.val&&this.password.new.val&&this.password.repeat.val)if(this.password.new.val!==this.password.repeat.val)UIkit.notification({status:"warning",message:d[u].passMissMatch});else{var s=this,e={old_password:this.password.old.val,new_password:this.password.new.val};f.ajax({url:ffuShop.routes.user.changePass.url,type:ffuShop.routes.user.changePass.req,dataType:"json",data:e,success:function(e){var t,r="";if(e.errors&&!f.isEmptyObject(e.errors))t="danger",r=ffuShop.helpers.createErrorMsg(e.errors);else for(p in t="success",r=e.message,s.password)s.password[p].val="";UIkit.notification({status:t,message:r})}})}else UIkit.notification({status:"warning",message:d[u].emptyFields})},getOrders:function(){var t=this;f.ajax({url:ffuShop.routes.orders.all.url,type:ffuShop.routes.orders.all.req,dataType:"json",success:function(e){e&&0!=e.length&&(e.errors&&!f.isEmptyObject(e.errors)?UIkit.notification({status:"danger",message:ffuShop.helpers.createErrorMsg(e.errors)}):t.orders=e)}})}},watch:{editing:function(e){if(e)var t=this,r=setInterval(function(){!t.$refs.birthday&&t.$refs.phone||(clearInterval(r),f(t.$refs.birthday).datepicker({changeMonth:!0,changeYear:!0,dateFormat:"dd/mm/yy",firstDay:1,maxDate:0}).on("change",ffuShop.helpers.nativeChange),f(t.$refs.phone).mask("+38(999)999-99-99").on("change",ffuShop.helpers.nativeChange))},200)},page:function(e){null===this.orders&&2==e&&this.getOrders()}}}))});
//# sourceMappingURL=main.js.map
